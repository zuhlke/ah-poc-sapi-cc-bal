language: java

script:
  - mvn clean
  - mvn test -B

before_deploy:
  - mvn package -DskipTests=true

deploy:
  provider: cloudfoundry
  username: $PCF_USERNAME
  password: $PCF_PASSWORD
  api: $PCF_API
  organization: $PCF_ORG
  space: $PCF_SPACE
  manifest: manifest.yml # (optional)  Defaults to manifest.yml.
  app_name: ah-poc-sapi-cc-bal # (optional)

after_deploy:
  - ./run-contract-tests.sh